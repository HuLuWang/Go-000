学习笔记

1. **架构设计最重要的是理解产品体系在系统中的定位**
2. 架构设计：\
   2.1 BFF：服务编排， API设计。 关注业务平台化逻辑 \
   2.2 Service: 去平台业务逻辑，专注功能API的实现，关注稳定性，可用性 \
   2.3 JOB: 消息队列做削峰处理 \
   2.4 ADMIN: 管理平台 \
   2.5 Dependency:  外部依赖，在BFF层进行收敛
3. 读\
   Cache-Aside 模式： 先读缓存，再读存储
4. 写\
   4.1 mysql binlog 被canal消费，将原始的CRUD操作 回放录入到ES中\
   4.2 [归并回源](https://pkg.go.dev/golang.org/x/sync/singleflight)

   
   

备注: \
  hundering herd（惊群效应）: \
  1.大量的进程在等待某个事件的发生\
  2.在某个事件点这个事件发生了\
  3.大量的进程都被叫醒了，但是只有一个进程能获得资源(比如抢一个锁)\
  4.剩下的进程都重新进入等待状态\
  5.这个过程不断循环直到最后没有等待的进程了\
   